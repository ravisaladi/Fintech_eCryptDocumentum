<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>eCryptDocumento - Secured Block Chain for file storage</title>
<link rel="stylesheet" media="screen" href="/css/main.css" />

<script th:inline="javascript">
/*<![CDATA[*/
function test() {
  var url = /*[[${qrcode}]]*/ 'default';
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
	alert(this.readyState + " " + this.status);
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("demo").innerHTML = this.responseText;
      alert(this.responseText);
    }
  };
  xhttp.open("GET", url, true);
  xhttp.send();

}

function alertme() {
	var url = /*[[${qrcode}]]*/ 'default';
	window.open(url);
	//alert(url + " <Br />Please copy the above url and paster it in anower browser and enter, you will get QR CODE!");
}
/*]]>*/
</script>
</head>

<body>
	<div id="mainBody">
		
		<div id="heading">
			<a href="/">
				<h1>eCrytp Documentum<br />The Secure Block Chain Data Store</h1>
			</a>
		</div>
		
		<div id="navigation">
			<a href="/index">Home</a>
			<div th:if="${session.activeuser != null}">
				<a href="/logout">Logout</a>
			</div>
			<a href="/test">Test</a>
		</div>
		
		<div id="bodycontent">
		<div th:if="${errorMsg != null}" >		
			<div id="errormsg">
				<p><span th:text="${errorMsg}"></span></p>
			</div>
		</div>
		<div th:if="${eterces!=null}" id="MessageBox">
			<div th:if="${eterces != 'empty'}" >		
				<b><span th:text="${eterces}"></span></b><br />
				<p>Please open authenticator app in your mobile phone, and add the above code so that next time when you login you need to enter the secrete from that app</p>
				<Br /><button onclick="alertme()">Display</button>
				<p id="demo"></p>
				
			</div>
			<div th:if="${eterces == 'empty'}" >	
				<div id="errormsg">		
					<p>Please enter valid email id and click get code again!</p>
				</div>	
			</div>
		</div>
		 <form action="#" th:action="@{/login}" th:object="${userObj}" method="post" > 
		<table>
			<tr>
				<td>
					<div id="logintable">
					<h1>Login</h1>
				    <label for="fname">Email ID</label>
				    <input type="text" name="userid" th:field="*{user}" placeholder="User Id (Usually your email).." />
					<br />
				    <label for="lname">Enter Secret</label>
				    <input type="number" name="secrete" th:field="*{secrete}" placeholder="Secret" maxlength="6" />
				  
				    <input type="submit" name="action" value="Submit" />
				   	</div>
				 </td>
				 <td>
				 	<div id="logintable">
				    <h2>Don't you have an account? <br />Click below button to create secret...  <br /></h2>
					<input type="submit" name="action" value="Get GAuthenticatino Code" />
					</div>
				</td>
			</tr>
		</table>
		</form>
		</div>
	</div>
	<div id="footer">
		Copyright 2018 all rights reserved rvk40413@gmail.com
	</div>
</body>

</html>