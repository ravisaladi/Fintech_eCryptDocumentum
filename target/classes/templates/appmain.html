<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>eCryptDocumento - Secured Block Chain for file storage</title>
<link rel="stylesheet" media="screen" href="/css/main.css" />

<script th:inline="javascript">
/*<![CDATA[*/
function test() {
  var url = /*[[${qrcode}]]*/ 'default';
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
	alert(this.readyState + " " + this.status);
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("demo").innerHTML = this.responseText;
      alert(this.responseText);
    }
  };
  xhttp.open("GET", url, true);
  xhttp.send();

}

function alertme() {
	var url = /*[[${qrcode}]]*/ 'default';
	window.open(url);
	//alert(url + " <Br />Please copy the above url and paster it in anower browser and enter, you will get QR CODE!");
}
/*]]>*/
</script>
</head>

<body>
	<div id="mainBody">
		<a href="/">
			<div id="heading">
				<h1>eCrytpDocumento - Secured Block Chain for file storage</h1>
			</div>
		</a>
		<div id="navigation">
			<a href="/">Home</a>
			<div th:if="${session.activeuser != null}">
				<a href="/logout">Logout</a>
			</div>
		</div>
		
		<div id="bodycontent">
		<div th:if="${errorMsg != null}" >		
			<div id="errormsg">
				<p><span th:text="${errorMsg}"></span></p>
			</div>
		</div>
		<div th:if="${eterces!=null}" id="MessageBox">
			<div th:if="${eterces != 'empty'}" >		
				<b><span th:text="${eterces}"></span></b><br />
				<p>Please open authenticator app in your mobile phone, and add the above code so that next time when you login you need to enter the secrete from that app</p>
				<Br /><button onclick="alertme()">Display</button>
				<p id="demo"></p>
				
			</div>
			<div th:if="${eterces == 'empty'}" >	
				<div id="errormsg">		
					<p>User id cannot be empty! please fill and try again!</p>
				</div>	
			</div>
		</div>
		<table>
			<tr>
				<td>
				<div id="logintable">
					<h3>Already have secret?</h3>
				  <form action="#" th:action="@{/login}" th:object="${userObj}" method="post" > 
				  	<label for="fname" > User ID </label>
				    <input type="text" name="userid" th:field="*{user}" placeholder="EMAIL ID"/>
				    <label for="lname">Secret (Enter code from google authenticator)</label>
				    <input type="number" name="secrete" th:field="*{secrete}" placeholder="Secret" maxlength="6" />
				    <input type="submit" name="action" value="Submit1" />
				  </form>
				</div>
				</td>
				<td>
				<div id="logintable">
					<h3>Create secret?</h3>
				  <form action="#" th:action="@{/login}" th:object="${userObj}" method="post" > 
				    <label for="fname">Create UserID</label>
				    <input type="text" name="userid" th:field="*{user}" placeholder="User Id (Usually your email).." />
					<input type="submit" name="action" value="Get Code" />
					<Br /><br />
					
				    <label for="lname">Enter Secret to complete your registration!</label>
				    <input type="number" name="secrete" th:field="*{secrete}" placeholder="Secret" maxlength="6" />
				  
				    <input type="submit" name="action" value="Submit2" />
				  </form>
				</div>
				</td>
			</tr>
		</table>
		</div>
	</div>
	<div id="footer">
		Copyright 2018 all rights reserved rvk40413@gmail.com
	</div>
</body>

</html>